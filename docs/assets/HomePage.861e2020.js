import{defineComponent as v,onBeforeMount as b,ref as l,resolveComponent as w,openBlock as y,createElementBlock as C,createElementVNode as e,withDirectives as p,vModelText as _,withKeys as h,createVNode as x,withCtx as E,createTextVNode as B,pushScopeId as S,popScopeId as F}from"https://esm.sh/vue@^3.2.41";import{u as N,a as I,M as d}from"./settings.0938af97.js";import{useRouter as D}from"https://esm.sh/vue-router@^4.1.6";import{_ as M}from"./index.8ce5723a.js";import"https://esm.sh/pinia@^2.0.23";import"https://esm.sh/js-cookie@^3.0.1";import"https://esm.sh/axios@^1.1.2";import"https://esm.run/js-sha256@^0.9.0";const n=o=>(S("data-v-5ebae137"),o=o(),F(),o),k={class:"main"},A={class:"login-view"},O=n(()=>e("p",{class:"subtitle"},"\u6B22\u8FCE",-1)),P=n(()=>e("p",{class:"title"},"\u8D26\u6237\u767B\u9646",-1)),T={class:"login-form"},V=n(()=>e("p",{class:"account-text"},"\u7528\u6237\u8D26\u53F7/\u8EAB\u4EFD\u8BC1\u53F7",-1)),L=n(()=>e("p",{class:"password-text"},"\u5BC6\u7801",-1)),U=["onKeyup"],K=v({__name:"HomePage",setup(o){const c=D(),m=N(),f=I();b(async()=>{f.verifyLogin()&&(console.error("from /index to /apply"),await c.push("/apply"))});const s=l(),u=l(""),i=async()=>{if(!s.value||!u.value){alert(d.ACCOUNT_PWD_NULL_OR_EMPTY);return}let t=await m.login({accountOrIdNumber:s.value.toString(),password:u.value});t.code===500&&alert(t.message),(t.code===200||t.message===d.LOGIN_REPEAT)&&await c.push("/apply")};return(t,a)=>{const g=w("router-link");return y(),C("div",k,[e("div",A,[O,P,e("form",T,[V,p(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),type:"number",class:"account-bar"},null,512),[[_,s.value]]),L,p(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>u.value=r),onKeyup:h(i,["enter"]),type:"password",class:"password-bar",autocomplete:"on"},null,40,U),[[_,u.value]])]),e("button",{onClick:i,class:"login-button"},"\u767B\u5F55"),x(g,{to:"/register",class:"register-button"},{default:E(()=>[B("\u6CA1\u6709\u8D26\u6237\uFF1F\u6CE8\u518C\u4E00\u4E2A")]),_:1})])])}}});const J=M(K,[["__scopeId","data-v-5ebae137"]]);export{J as default};
